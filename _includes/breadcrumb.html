{% assign dirs = page.path | split: '/' %}

{% if dirs.size > 1 and dirs.last != 'index.md' %}
{% assign path = dirs[0] %}
<ol class="breadcrumb">
  <li><a href="/">HOME</a></li>
{% for dir in dirs %}
  {% unless forloop.last %}
    {% assign finder_path = path | append: '/index.md' %}
    {% for p in site.pages %}
      {% if p.path contains finder_path %}
        <li><a href="{{ site.baseurl }}{{ p.url }}">{{ p.title }}</a></li>
      {% endif %}
    {% endfor %}
    {% assign path = path | append: '/' | append: dir %}
  {% endunless %}
{% endfor %}
  <li class="active">{{ page.title }}</li>
</ol>
{% endif %}
